---
title: Providers Guide  
description: Advanced configuration and protocol integrations for extending ConnectorKit SDK functionality.
---

import React from 'react'

# Providers Guide

Learn how to configure the SDK and integrate with DeFi protocols through the provider system.

## ArcProvider Configuration

The `ArcProvider` is the root provider that manages Solana network connections and protocol integrations.

### Basic Configuration

```tsx
import { ArcProvider } from '@connector-kit/sdk'

<ArcProvider 
  network="mainnet-beta"
  rpcUrl="https://api.mainnet-beta.solana.com"
  commitment="confirmed"
>
  <YourApp />
</ArcProvider>
```

### Advanced Configuration

```tsx
import { ArcProvider } from '@connector-kit/sdk'
import { createJupiter } from '@connector-kit/jupiter'

<ArcProvider 
  config={{
    network: 'mainnet-beta',
    rpcUrl: 'https://your-custom-rpc.com',
    commitment: 'finalized',
    
    // Protocol integrations
    providers: [
      createJupiter({
        apiUrl: 'https://quote-api.jup.ag/v6',
        slippageBps: 50, // 0.5%
        computeUnitPriceMicroLamports: 1000,
      }),
      // Add more providers here
    ],
    
    // Error handling
    onError: (error) => {
      console.error('SDK Error:', error)
    },
    
    // Connection callbacks
    onConnect: (publicKey) => {
      console.log('Wallet connected:', publicKey.toString())
    },
    
    onDisconnect: () => {
      console.log('Wallet disconnected')
    }
  }}
>
  <YourApp />
</ArcProvider>
```

## Configuration Options

### Network Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `network` | `'mainnet-beta' \| 'devnet' \| 'testnet'` | `'mainnet-beta'` | Solana network |
| `rpcUrl` | `string` | Network default | Custom RPC endpoint |
| `commitment` | `Commitment` | `'confirmed'` | Transaction commitment level |

### Provider Options

| Option | Type | Description |
|--------|------|-------------|
| `providers` | `Provider[]` | Array of protocol providers |
| `autoConnect` | `boolean` | Auto-connect wallet on load |
| `debug` | `boolean` | Enable debug logging |

### Event Handlers

| Handler | Type | Description |
|---------|------|-------------|
| `onConnect` | `(publicKey: PublicKey) => void` | Wallet connection callback |
| `onDisconnect` | `() => void` | Wallet disconnection callback |
| `onError` | `(error: ArcError) => void` | Global error handler |

## Protocol Providers

### Jupiter Integration

Install Jupiter provider:

```bash
npm install @connector-kit/jupiter
```

Configure Jupiter for token swapping:

```tsx
import { ArcProvider } from '@connector-kit/sdk'
import { createJupiter } from '@connector-kit/jupiter'

const jupiterProvider = createJupiter({
  apiUrl: 'https://quote-api.jup.ag/v6',
  slippageBps: 50, // 0.5% slippage
  computeUnitPriceMicroLamports: 1000,
  platformFeeBps: 0, // Platform fee
})

<ArcProvider 
  config={{
    network: 'mainnet-beta',
    providers: [jupiterProvider]
  }}
>
  <SwapInterface />
</ArcProvider>
```

Use Jupiter in your components:

```tsx
import { useSwap } from '@connector-kit/sdk'

function SwapInterface() {
  const { quote, swap, isLoading } = useSwap()
  
  const handleSwap = async () => {
    try {
      // Get quote
      const quoteResponse = await quote({
        inputMint: 'So11111111111111111111111111111111111111112', // SOL
        outputMint: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v', // USDC
        amount: 1000000, // 0.001 SOL in lamports
        slippageBps: 50
      })
      
      if (quoteResponse) {
        // Execute swap
        const signature = await swap(quoteResponse)
        console.log('Swap completed:', signature)
      }
    } catch (error) {
      console.error('Swap failed:', error)
    }
  }
  
  return (
    <button onClick={handleSwap} disabled={isLoading}>
      {isLoading ? 'Swapping...' : 'Swap SOL to USDC'}
    </button>
  )
}
```

## Network Management

### Dynamic Network Switching

```tsx
import { useCluster } from '@connector-kit/sdk'

function NetworkSwitcher() {
  const { cluster, setCluster, clusters } = useCluster()
  
  return (
    <div>
      <h3>Current Network: {cluster.name}</h3>
      <div>
        {clusters.map(c => (
          <button 
            key={c.name}
            onClick={() => setCluster(c.name)}
            disabled={c.name === cluster.name}
          >
            {c.name}
          </button>
        ))}
      </div>
    </div>
  )
}
```

### Custom RPC Configuration

```tsx
import { EnhancedClusterProvider, createSolanaMainnet } from '@connector-kit/sdk'

const customMainnet = createSolanaMainnet({
  name: 'Custom Mainnet',
  endpoint: 'https://your-custom-rpc.com',
  commitment: 'finalized'
})

<EnhancedClusterProvider 
  clusters={[customMainnet]}
  defaultCluster="Custom Mainnet"
>
  <ArcProvider>
    <YourApp />
  </ArcProvider>
</EnhancedClusterProvider>
```

## Custom Provider Creation

### Provider Interface

```tsx
interface SwapProvider {
  name: string
  quote: (params: SwapParams) => Promise<SwapQuote>
  buildTransaction: (quote: SwapQuote) => Promise<PrebuiltTransaction>
  isTokenSupported: (mint: string) => boolean
}

interface SwapParams {
  inputMint: string
  outputMint: string
  amount: number
  slippageBps?: number
}

interface SwapQuote {
  inputMint: string
  outputMint: string
  inAmount: number
  outAmount: number
  priceImpact: number
  platformFee?: number
  swapTransaction: string
}
```

### Creating a Custom Provider

```tsx
import { createProvider } from '@connector-kit/providers'

const myDexProvider = createProvider({
  name: 'my-dex',
  swap: {
    quote: async (params: SwapParams): Promise<SwapQuote> => {
      // Implement quote logic
      const response = await fetch(`https://my-dex-api.com/quote`, {
        method: 'POST',
        body: JSON.stringify(params)
      })
      return response.json()
    },
    
    buildTransaction: async (quote: SwapQuote): Promise<PrebuiltTransaction> => {
      // Implement transaction building
      const response = await fetch(`https://my-dex-api.com/swap`, {
        method: 'POST',
        body: JSON.stringify(quote)
      })
      return response.json()
    },
    
    isTokenSupported: (mint: string): boolean => {
      // Check if token is supported
      return supportedTokens.includes(mint)
    }
  }
})

// Use in ArcProvider
<ArcProvider 
  config={{
    providers: [myDexProvider]
  }}
>
  <YourApp />
</ArcProvider>
```

## Environment Configuration

### Development Setup

```tsx title="providers/development.ts"
import { createSolanaDevnet } from '@connector-kit/sdk'

export const devConfig = {
  network: 'devnet' as const,
  rpcUrl: 'https://api.devnet.solana.com',
  commitment: 'confirmed' as const,
  debug: true,
  providers: [
    // Development-specific providers
  ]
}
```

### Production Setup

```tsx title="providers/production.ts"
export const prodConfig = {
  network: 'mainnet-beta' as const,
  rpcUrl: process.env.NEXT_PUBLIC_RPC_URL || 'https://api.mainnet-beta.solana.com',
  commitment: 'finalized' as const,
  debug: false,
  providers: [
    createJupiter({
      apiUrl: 'https://quote-api.jup.ag/v6',
      slippageBps: 50,
    })
  ],
  onError: (error) => {
    // Production error handling
    console.error('Production SDK Error:', error)
  }
}
```

### Environment-based Configuration

```tsx title="app/layout.tsx"
import { ArcProvider } from '@connector-kit/sdk'
import { devConfig } from './providers/development'
import { prodConfig } from './providers/production'

const config = process.env.NODE_ENV === 'production' ? prodConfig : devConfig

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <body>
        <ConnectorProvider config={getDefaultConfig({ appName: "Your App" })}>
          <ArcProvider config={config}>
            {children}
          </ArcProvider>
        </ConnectorProvider>
      </body>
    </html>
  )
}
```

## Error Handling

### Global Error Handling

```tsx
import { ArcProvider, ArcErrorCode } from '@connector-kit/sdk'

const handleError = (error: ArcError) => {
  switch (error.code) {
    case ArcErrorCode.WALLET_NOT_CONNECTED:
      // Handle wallet connection errors
      break
    case ArcErrorCode.INSUFFICIENT_FUNDS:
      // Handle insufficient funds
      break
    case ArcErrorCode.NETWORK_ERROR:
      // Handle network errors
      break
    default:
      console.error('Unhandled error:', error)
  }
}

<ArcProvider 
  config={{
    onError: handleError
  }}
>
  <YourApp />
</ArcProvider>
```

### Component-Level Error Boundaries

```tsx
import { ConnectorErrorBoundary } from '@connector-kit/connector'

function App() {
  return (
    <ConnectorErrorBoundary
      fallback={({ error, retry }) => (
        <div>
          <h2>Something went wrong</h2>
          <p>{error.message}</p>
          <button onClick={retry}>Try Again</button>
        </div>
      )}
    >
      <YourApp />
    </ConnectorErrorBoundary>
  )
}
```

## Performance Optimization

### Bundle Splitting

```tsx
// Load providers dynamically
const JupiterProvider = lazy(() => 
  import('@connector-kit/jupiter').then(m => ({ default: m.createJupiter }))
)

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <ArcProvider 
        config={{
          providers: [<JupiterProvider />]
        }}
      >
        <YourApp />
      </ArcProvider>
    </Suspense>
  )
}
```

### Caching Configuration

```tsx
<ArcProvider 
  config={{
    // Configure React Query caching
    queryClient: {
      defaultOptions: {
        queries: {
          staleTime: 30000, // 30 seconds
          cacheTime: 300000, // 5 minutes
          retry: 3,
          retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000)
        }
      }
    }
  }}
>
  <YourApp />
</ArcProvider>
```

## Next Steps

- [Hooks Reference](/docs/sdk/hooks) - Complete hook documentation
- [Connector Kit](/docs/connector-kit/introduction) - Wallet connection setup  
- [@connector-kit/jupiter](https://github.com/connector-kit/jupiter) - Jupiter integration example
- [@connector-kit/providers](https://github.com/connector-kit/providers) - Provider utilities
