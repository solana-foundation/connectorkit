---
title: useCluster
description: Hook for cluster information and network utilities
---

# useCluster

The `useCluster` hook provides information about the current Solana cluster (network) and utility functions for generating explorer URLs and checking network capabilities.

## Usage

### Direct Import
```tsx
import { useCluster } from '@connectorkit/hooks'

function MyComponent() {
  const { 
    cluster, 
    name,
    isDevnet,
    isMainnet,
    getAddressUrl,
    getTransactionUrl,
    canAirdrop 
  } = useCluster()
  
  return (
    <div>
      <p>Network: {name}</p>
      <p>Cluster: {cluster}</p>
      <p>Can Airdrop: {canAirdrop ? 'Yes' : 'No'}</p>
    </div>
  )
}
```

### Copy Hook Code
If you prefer to copy the hook directly:

```tsx
'use client'

import { useMemo } from 'react'
import { useArcClient } from '../core/arc-client-provider'
import { 
  getClusterInfo, 
  getExplorerUrl, 
  getFaucetUrl,
  isOfficialRpc,
  OFFICIAL_RPC_URLS,
  type Cluster, 
  type ClusterInfo 
} from '../utils/cluster'

export interface UseClusterReturn extends ClusterInfo {
  getAddressUrl: (address: string) => string
  getTransactionUrl: (signature: string) => string
  getFaucetUrl: () => string | null
  isOfficialRpc: boolean
  canAirdrop: boolean
  supportsTransactions: boolean
  getAlternativeRpcs: () => string[]
}

/**
 * Hook to get current cluster information and utilities
 * Automatically detects cluster from the RPC URL in ArcProvider
 * 
 * @example
 * ```tsx
 * const { 
 *   cluster, 
 *   name,
 *   isDevnet,
 *   getAddressUrl,
 *   canAirdrop 
 * } = useCluster()
 * 
 * // Check what cluster we're on
 * console.log('Current cluster:', cluster) // 'devnet'
 * console.log('Network name:', name) // 'Devnet'
 * 
 * // Generate explorer URLs
 * const explorerUrl = getAddressUrl('11111111111111111111111111111111')
 * console.log(explorerUrl) // https://explorer.solana.com/address/...?cluster=devnet
 * 
 * // Check capabilities
 * if (canAirdrop) {
 *   console.log('Can request airdrop on this network')
 * }
 * ```
 */
export function useCluster(): UseClusterReturn {
  const { config } = useArcClient()
  
  const clusterInfo = useMemo(() => {
    return getClusterInfo(config.rpcUrl)
  }, [config.rpcUrl])
  
  const helpers = useMemo(() => {
    const rpcUrl = config.rpcUrl || OFFICIAL_RPC_URLS.devnet
    
    return {
      getAddressUrl: (address: string) => getExplorerUrl(address, rpcUrl, 'address'),
      getTransactionUrl: (signature: string) => getExplorerUrl(signature, rpcUrl, 'tx'),
      getFaucetUrl: () => getFaucetUrl(clusterInfo.cluster),
      isOfficialRpc: isOfficialRpc(rpcUrl),
      canAirdrop: clusterInfo.isDevnet || clusterInfo.isTestnet || clusterInfo.isLocal,
      supportsTransactions: true,
      
      getAlternativeRpcs: (): string[] => {
        const { cluster } = clusterInfo
        
        switch (cluster) {
          case 'mainnet-beta':
            return [
              'https://api.mainnet-beta.solana.com',
              'https://rpc.ankr.com/solana',
              'https://solana-mainnet.g.alchemy.com/v2/demo'
            ]
          case 'devnet':
            return [
              'https://api.devnet.solana.com', 
              'https://rpc.ankr.com/solana_devnet',
              'https://solana-devnet.g.alchemy.com/v2/demo'
            ]
          case 'testnet':
            return [
              'https://api.testnet.solana.com',
              'https://rpc.ankr.com/solana_testnet'
            ]
          case 'localnet':
            return [
              'http://localhost:8899',
              'http://127.0.0.1:8899'
            ]
          default:
            return [rpcUrl]
        }
      }
    }
  }, [config.rpcUrl, clusterInfo])
  
  return {
    ...clusterInfo,
    ...helpers
  }
}

export function useCanAirdrop(): boolean {
  const { canAirdrop } = useCluster()
  return canAirdrop
}

export function useExplorerUrls() {
  const { getAddressUrl, getTransactionUrl } = useCluster()
  
  return {
    getAddressUrl,
    getTransactionUrl,
    address: getAddressUrl,
    transaction: getTransactionUrl,
    tx: getTransactionUrl
  }
}
```

## Return Value

### Cluster Information
- `cluster: Cluster` - Current cluster ('mainnet-beta', 'devnet', 'testnet', 'localnet', or 'unknown')
- `name: string` - Human-readable cluster name ('Mainnet', 'Devnet', etc.)
- `rpcUrl: string` - Current RPC URL
- `isMainnet: boolean` - Whether on mainnet
- `isDevnet: boolean` - Whether on devnet  
- `isTestnet: boolean` - Whether on testnet
- `isLocal: boolean` - Whether on localnet
- `isUnknown: boolean` - Whether cluster is unknown

### Utility Functions
- `getAddressUrl: (address: string) => string` - Generate explorer URL for an address
- `getTransactionUrl: (signature: string) => string` - Generate explorer URL for a transaction
- `getFaucetUrl: () => string | null` - Get faucet URL for current cluster (if available)
- `isOfficialRpc: boolean` - Whether using official Solana RPC
- `canAirdrop: boolean` - Whether airdrops are supported on this cluster
- `supportsTransactions: boolean` - Whether transactions are supported
- `getAlternativeRpcs: () => string[]` - Get list of alternative RPC endpoints

## Example

### Basic Network Information
```tsx
import { useCluster } from '@connectorkit/hooks'

function NetworkInfo() {
  const { 
    cluster, 
    name, 
    rpcUrl,
    isMainnet,
    isDevnet,
    canAirdrop 
  } = useCluster()

  return (
    <div>
      <h3>Network Information</h3>
      <p>Cluster: {cluster}</p>
      <p>Name: {name}</p>
      <p>RPC URL: {rpcUrl}</p>
      <p>Is Mainnet: {isMainnet ? 'Yes' : 'No'}</p>
      <p>Is Devnet: {isDevnet ? 'Yes' : 'No'}</p>
      <p>Supports Airdrops: {canAirdrop ? 'Yes' : 'No'}</p>
    </div>
  )
}
```

### Explorer Links
```tsx
import { useCluster } from '@connectorkit/hooks'

function ExplorerLinks({ address, signature }: { 
  address?: string
  signature?: string 
}) {
  const { getAddressUrl, getTransactionUrl } = useCluster()

  return (
    <div>
      {address && (
        <a 
          href={getAddressUrl(address)} 
          target="_blank" 
          rel="noopener noreferrer"
        >
          View Address on Explorer
        </a>
      )}
      
      {signature && (
        <a 
          href={getTransactionUrl(signature)} 
          target="_blank" 
          rel="noopener noreferrer"
        >
          View Transaction on Explorer
        </a>
      )}
    </div>
  )
}
```

### Network-specific Features
```tsx
import { useCluster, useAirdrop } from '@connectorkit/hooks'

function NetworkFeatures() {
  const { canAirdrop, getFaucetUrl, name } = useCluster()
  const { requestAirdrop, isLoading } = useAirdrop()

  const handleAirdrop = async () => {
    if (!canAirdrop) return
    
    try {
      await requestAirdrop('your-address', BigInt(1000000000))
    } catch (error) {
      console.error('Airdrop failed:', error)
    }
  }

  const faucetUrl = getFaucetUrl()

  return (
    <div>
      <h3>Features for {name}</h3>
      
      {canAirdrop ? (
        <div>
          <button onClick={handleAirdrop} disabled={isLoading}>
            {isLoading ? 'Requesting...' : 'Request Airdrop'}
          </button>
          
          {faucetUrl && (
            <p>
              Or use the{' '}
              <a href={faucetUrl} target="_blank" rel="noopener noreferrer">
                manual faucet
              </a>
            </p>
          )}
        </div>
      ) : (
        <p>Airdrops not available on this network</p>
      )}
    </div>
  )
}
```

### RPC Alternatives
```tsx
import { useCluster } from '@connectorkit/hooks'

function RpcOptions() {
  const { rpcUrl, getAlternativeRpcs, isOfficialRpc } = useCluster()
  const alternatives = getAlternativeRpcs()

  return (
    <div>
      <h3>RPC Configuration</h3>
      <p>Current: {rpcUrl}</p>
      <p>Official RPC: {isOfficialRpc ? 'Yes' : 'No'}</p>
      
      <h4>Alternative RPCs:</h4>
      <ul>
        {alternatives.map(alt => (
          <li key={alt}>{alt}</li>
        ))}
      </ul>
    </div>
  )
}
```

### Conditional Rendering by Network
```tsx
import { useCluster } from '@connectorkit/hooks'

function NetworkConditionalContent() {
  const { isMainnet, isDevnet, cluster } = useCluster()

  if (isMainnet) {
    return (
      <div>
        <h2>üü¢ Mainnet Mode</h2>
        <p>You're on the main Solana network.</p>
        <p>‚ö†Ô∏è Real SOL and tokens are being used!</p>
      </div>
    )
  }

  if (isDevnet) {
    return (
      <div>
        <h2>üü° Devnet Mode</h2>
        <p>You're on the development network.</p>
        <p>‚úÖ Safe to experiment with test tokens</p>
      </div>
    )
  }

  return (
    <div>
      <h2>üì∂ {cluster} Network</h2>
      <p>Connected to a custom or test network.</p>
    </div>
  )
}
```

### Using Helper Hooks
```tsx
import { useCanAirdrop, useExplorerUrls } from '@connectorkit/hooks'

function HelperHooksExample() {
  const canAirdrop = useCanAirdrop()
  const { getAddressUrl, getTransactionUrl } = useExplorerUrls()

  return (
    <div>
      <p>Can request airdrops: {canAirdrop ? 'Yes' : 'No'}</p>
      {/* Use explorer URLs */}
    </div>
  )
}
```

### Network Switcher UI
```tsx
import { useCluster } from '@connectorkit/hooks'

function NetworkSwitcher() {
  const { cluster, name, getAlternativeRpcs } = useCluster()
  const alternatives = getAlternativeRpcs()

  // This would typically involve switching RPC in your provider
  const switchNetwork = (newRpcUrl: string) => {
    console.log('Switch to:', newRpcUrl)
    // Implementation depends on your setup
  }

  return (
    <div>
      <p>Current: {name}</p>
      <select 
        value={cluster}
        onChange={(e) => {
          const selectedRpc = alternatives.find(rpc => 
            rpc.includes(e.target.value)
          )
          if (selectedRpc) switchNetwork(selectedRpc)
        }}
      >
        <option value="mainnet-beta">Mainnet</option>
        <option value="devnet">Devnet</option>
        <option value="testnet">Testnet</option>
        <option value="localnet">Localhost</option>
      </select>
    </div>
  )
}
```

## Cluster Types

```tsx
type Cluster = 'mainnet-beta' | 'devnet' | 'testnet' | 'localnet' | 'unknown'

interface ClusterInfo {
  cluster: Cluster
  name: string
  rpcUrl: string
  isMainnet: boolean
  isDevnet: boolean
  isTestnet: boolean
  isLocal: boolean
  isUnknown: boolean
}
```